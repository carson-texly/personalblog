# gin file uploads

Recently I wrote a file upload function for a web app. It's best practice to avoid sticking blobs of data in a database, so I needed to offload the files to another spot - an ideal application for AWS s3. Conveniently, I never do any sort of ETL on this data, so the trick was simply replacing uploaded binary file data in the database with a link to it's location in S3. That's simple enough, AWS provides an SDK in just about every language, so implementing a Golang S3 uploader was basically just copying and pasting a tutorial. I added mimetype detection both for security (detecting executable data to avoid file injection attacks) and to correctly specify file types in S3 metadata. Finally, you can generate an S3 link just given a filename - which I randomly generated to prevent collisions. I launched this into prod a few days later, and it has scaled to a few hundred PDF uploads well, which would have crashed my Mongo instance had I just directly inserted blob data.
